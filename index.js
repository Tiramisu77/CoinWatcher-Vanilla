!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=17)}([function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(s=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),o=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(o).concat([i]).join("\n")}var s;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];null!=o&&(r[o]=!0)}for(i=0;i<e.length;i++){var s=e[i];null!=s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(e,t,n){var r,i,o={},s=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),a=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var r=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),c=null,l=0,d=[],h=n(4);function u(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=o[r.id];if(i){i.refs++;for(var s=0;s<i.parts.length;s++)i.parts[s](r.parts[s]);for(;s<r.parts.length;s++)i.parts.push(y(r.parts[s],t))}else{var a=[];for(s=0;s<r.parts.length;s++)a.push(y(r.parts[s],t));o[r.id]={id:r.id,refs:1,parts:a}}}}function p(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],s=t.base?o[0]+t.base:o[0],a={css:o[1],media:o[2],sourceMap:o[3]};r[s]?r[s].parts.push(a):n.push(r[s]={id:s,parts:[a]})}return n}function m(e,t){var n=a(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=d[d.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),d.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=a(e.insertAt.before,n);n.insertBefore(t,i)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=d.indexOf(e);t>=0&&d.splice(t,1)}function f(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var r=function(){0;return n.nc}();r&&(e.attrs.nonce=r)}return v(t,e.attrs),m(e,t),t}function v(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function y(e,t){var n,r,i,o;if(t.transform&&e.css){if(!(o="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=o}if(t.singleton){var s=l++;n=c||(c=f(t)),r=S.bind(null,n,s,!1),i=S.bind(null,n,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",v(t,e.attrs),m(e,t),t}(t),r=function(e,t,n){var r=n.css,i=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(r=h(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var s=new Blob([r],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,n,t),i=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=f(t),r=function(e,t){var n=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){g(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=s()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=p(e,t);return u(n,t),function(e){for(var r=[],i=0;i<n.length;i++){var s=n[i];(a=o[s.id]).refs--,r.push(a)}e&&u(p(e,t),t);for(i=0;i<r.length;i++){var a;if(0===(a=r[i]).refs){for(var c=0;c<a.parts.length;c++)a.parts[c]();delete o[a.id]}}}};var w,b=(w=[],function(e,t){return w[e]=t,w.filter(Boolean).join("\n")});function S(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=b(t,i);else{var o=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}},function(e,t,n){var r=n(3);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(1)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,'html {\r\n    height: 100%;\r\n    width: 100%;\r\n    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\r\n    font-size: 16px;\r\n}\r\n\r\n@media (min-width: 0px) and (max-width: 359px) {\r\n    html {\r\n        font-size: 14px;\r\n    }\r\n}\r\n\r\nbody {\r\n    height: 100%;\r\n    width: 100%;\r\n    margin: 0;\r\n    background-color: var(--page-bg-color);\r\n    display: flex;\r\n    justify-content: center;\r\n}\r\n\r\n:root {\r\n    --main-color: #38384a;\r\n    ---secondary-color: #131b2b;\r\n    --page-bg-color: #590e79;\r\n    --main-font-color: #d3dbe6;\r\n}\r\n\r\n#app {\r\n    width: 100%;\r\n    height: 100%;\r\n    display: flex;\r\n    max-width: 700px;\r\n    flex-direction: column;\r\n    color: var(--main-font-color);\r\n    background-color: var(--main-color);\r\n    overflow: auto;\r\n}\r\n\r\n@media (min-width: 600px) {\r\n    #app {\r\n        padding: 0px 40px;\r\n    }\r\n}\r\n\r\n#root {\r\n    width: 100%;\r\n    flex: 1;\r\n    padding: 0;\r\n    margin: 0;\r\n    overflow: auto;\r\n}\r\n\r\n.page-container {\r\n    display: grid;\r\n\r\n    align-content: center;\r\n}\r\n\r\n@media (min-height: 600px) {\r\n    .page-container {\r\n        height: 100%;\r\n    }\r\n}\r\n\r\n.btn {\r\n    padding: 3px 6px 3px 6px;\r\n    margin: 8px 4px 2px 4px;\r\n    background: linear-gradient(cyan, #9fa2c3);\r\n    color: black;\r\n    text-align: center;\r\n    cursor: pointer;\r\n    border-radius: 2.5px;\r\n}\r\n\r\n#main {\r\n    display: grid;\r\n    grid-template-columns: 100%;\r\n    grid-template-rows:\r\n        minmax(min-content, max-content)\r\n        minmax(min-content, max-content)\r\n        minmax(86px, max-content)\r\n        minmax(min-content, 1fr);\r\n    grid-gap: 0px;\r\n    height: 100%;\r\n    width: 100%;\r\n    justify-items: center;\r\n}\r\n#appehead {\r\n    display: flex;\r\n    font-weight: bold;\r\n    font-size: 1.3em;\r\n    margin-bottom: 4px;\r\n    margin-top: 4px;\r\n}\r\n#networth {\r\n    grid-column: 1;\r\n    grid-row: 1;\r\n    display: flex;\r\n    white-space: nowrap;\r\n    flex-direction: row;\r\n    align-items: center;\r\n    justify-content: center;\r\n    flex-wrap: wrap;\r\n}\r\n\r\n@media (max-height: 415px) {\r\n    #networth {\r\n        flex-direction: row;\r\n    }\r\n}\r\n\r\n#networth > div {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n\r\n    margin: 6px;\r\n}\r\n.total-val {\r\n    font-size: 1.4rem;\r\n}\r\n.net-changes {\r\n    font-size: 0.9rem;\r\n}\r\n\r\n#change-period-buttons {\r\n    grid-row: 4;\r\n    display: flex;\r\n\r\n    align-items: center;\r\n    justify-content: center;\r\n    white-space: nowrap;\r\n    align-self: end;\r\n    flex-wrap: wrap;\r\n}\r\n\r\n#change-period-buttons > div {\r\n    display: flex;\r\n}\r\n\r\n.change-period-btn {\r\n    margin-top: 6px;\r\n    margin-bottom: 6px;\r\n    margin-left: 4px;\r\n    margin-right: 4px;\r\n    padding: 4px 8px;\r\n    cursor: pointer;\r\n    transition: all 0.3s ease-out;\r\n    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.5), 0 2px 2px rgba(0, 0, 0, 0.3), 0 0 4px 1px rgba(0, 0, 0, 0.2);\r\n    text-decoration: none;\r\n    text-align: center;\r\n    width: 70px;\r\n}\r\n\r\n.period-btn-pressed {\r\n    background-color: cyan;\r\n    color: black;\r\n}\r\n\r\n#footer-buttons {\r\n    width: 100%;\r\n    display: flex;\r\n    margin-bottom: 4px;\r\n    border-top: 2px;\r\n    border-top-color: var(---main-font-color);\r\n    border-top-style: solid;\r\n    min-height: max-content;\r\n}\r\n#footer-buttons > div {\r\n    flex: 1;\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n.footer-button {\r\n    height: 2.5em;\r\n    margin: 8px;\r\n    transition: 0.4s;\r\n    cursor: pointer;\r\n}\r\n.svgbody {\r\n    fill: var(--main-font-color);\r\n}\r\n.footer-button > .svgbody > .a {\r\n    fill: var(--main-font-color);\r\n}\r\n\r\n#add-coin {\r\n    height: 3em;\r\n}\r\n\r\n.clickable {\r\n    cursor: pointer;\r\n}\r\n\r\ninput[type="number"] {\r\n    -moz-appearance: textfield;\r\n}\r\n\r\ninput[type="number"]::-webkit-inner-spin-button,\r\ninput[type="number"]::-webkit-outer-spin-button {\r\n    -webkit-appearance: none;\r\n    margin: 0;\r\n}\r\n\r\n.inp {\r\n    background-color: inherit;\r\n    border-width: 0px;\r\n    border-bottom-width: 1px;\r\n    font: inherit;\r\n    color: inherit;\r\n}\r\n\r\n.inp:focus {\r\n    outline: none;\r\n}\r\n\r\n.inp:focus {\r\n    outline: none;\r\n}\r\n',""])},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(e,t,n){var r=n(6);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(1)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"#floatingBarsG {\r\n    display: none;\r\n    position: absolute;\r\n    width: 39px;\r\n    height: 48px;\r\n    margin: 6px 6px 6px 12px;\r\n}\r\n\r\n.blockG {\r\n    position: absolute;\r\n    background-color: rgb(255, 255, 255);\r\n    width: 6px;\r\n    height: 15px;\r\n    border-radius: 5px 5px 0 0;\r\n    -o-border-radius: 5px 5px 0 0;\r\n    -ms-border-radius: 5px 5px 0 0;\r\n    -webkit-border-radius: 5px 5px 0 0;\r\n    -moz-border-radius: 5px 5px 0 0;\r\n    transform: scale(0.4);\r\n    -o-transform: scale(0.4);\r\n    -ms-transform: scale(0.4);\r\n    -webkit-transform: scale(0.4);\r\n    -moz-transform: scale(0.4);\r\n    animation-name: fadeG;\r\n    -o-animation-name: fadeG;\r\n    -ms-animation-name: fadeG;\r\n    -webkit-animation-name: fadeG;\r\n    -moz-animation-name: fadeG;\r\n    animation-duration: 1.2s;\r\n    -o-animation-duration: 1.2s;\r\n    -ms-animation-duration: 1.2s;\r\n    -webkit-animation-duration: 1.2s;\r\n    -moz-animation-duration: 1.2s;\r\n    animation-iteration-count: infinite;\r\n    -o-animation-iteration-count: infinite;\r\n    -ms-animation-iteration-count: infinite;\r\n    -webkit-animation-iteration-count: infinite;\r\n    -moz-animation-iteration-count: infinite;\r\n    animation-direction: normal;\r\n    -o-animation-direction: normal;\r\n    -ms-animation-direction: normal;\r\n    -webkit-animation-direction: normal;\r\n    -moz-animation-direction: normal;\r\n}\r\n\r\n#rotateG_01 {\r\n    left: 0;\r\n    top: 17px;\r\n    animation-delay: 0.45s;\r\n    -o-animation-delay: 0.45s;\r\n    -ms-animation-delay: 0.45s;\r\n    -webkit-animation-delay: 0.45s;\r\n    -moz-animation-delay: 0.45s;\r\n    transform: rotate(-90deg);\r\n    -o-transform: rotate(-90deg);\r\n    -ms-transform: rotate(-90deg);\r\n    -webkit-transform: rotate(-90deg);\r\n    -moz-transform: rotate(-90deg);\r\n}\r\n\r\n#rotateG_02 {\r\n    left: 5px;\r\n    top: 6px;\r\n    animation-delay: 0.6s;\r\n    -o-animation-delay: 0.6s;\r\n    -ms-animation-delay: 0.6s;\r\n    -webkit-animation-delay: 0.6s;\r\n    -moz-animation-delay: 0.6s;\r\n    transform: rotate(-45deg);\r\n    -o-transform: rotate(-45deg);\r\n    -ms-transform: rotate(-45deg);\r\n    -webkit-transform: rotate(-45deg);\r\n    -moz-transform: rotate(-45deg);\r\n}\r\n\r\n#rotateG_03 {\r\n    left: 16px;\r\n    top: 2px;\r\n    animation-delay: 0.75s;\r\n    -o-animation-delay: 0.75s;\r\n    -ms-animation-delay: 0.75s;\r\n    -webkit-animation-delay: 0.75s;\r\n    -moz-animation-delay: 0.75s;\r\n    transform: rotate(0deg);\r\n    -o-transform: rotate(0deg);\r\n    -ms-transform: rotate(0deg);\r\n    -webkit-transform: rotate(0deg);\r\n    -moz-transform: rotate(0deg);\r\n}\r\n\r\n#rotateG_04 {\r\n    right: 5px;\r\n    top: 6px;\r\n    animation-delay: 0.9s;\r\n    -o-animation-delay: 0.9s;\r\n    -ms-animation-delay: 0.9s;\r\n    -webkit-animation-delay: 0.9s;\r\n    -moz-animation-delay: 0.9s;\r\n    transform: rotate(45deg);\r\n    -o-transform: rotate(45deg);\r\n    -ms-transform: rotate(45deg);\r\n    -webkit-transform: rotate(45deg);\r\n    -moz-transform: rotate(45deg);\r\n}\r\n\r\n#rotateG_05 {\r\n    right: 0;\r\n    top: 17px;\r\n    animation-delay: 1.05s;\r\n    -o-animation-delay: 1.05s;\r\n    -ms-animation-delay: 1.05s;\r\n    -webkit-animation-delay: 1.05s;\r\n    -moz-animation-delay: 1.05s;\r\n    transform: rotate(90deg);\r\n    -o-transform: rotate(90deg);\r\n    -ms-transform: rotate(90deg);\r\n    -webkit-transform: rotate(90deg);\r\n    -moz-transform: rotate(90deg);\r\n}\r\n\r\n#rotateG_06 {\r\n    right: 5px;\r\n    bottom: 4px;\r\n    animation-delay: 1.2s;\r\n    -o-animation-delay: 1.2s;\r\n    -ms-animation-delay: 1.2s;\r\n    -webkit-animation-delay: 1.2s;\r\n    -moz-animation-delay: 1.2s;\r\n    transform: rotate(135deg);\r\n    -o-transform: rotate(135deg);\r\n    -ms-transform: rotate(135deg);\r\n    -webkit-transform: rotate(135deg);\r\n    -moz-transform: rotate(135deg);\r\n}\r\n\r\n#rotateG_07 {\r\n    bottom: 0;\r\n    left: 16px;\r\n    animation-delay: 1.35s;\r\n    -o-animation-delay: 1.35s;\r\n    -ms-animation-delay: 1.35s;\r\n    -webkit-animation-delay: 1.35s;\r\n    -moz-animation-delay: 1.35s;\r\n    transform: rotate(180deg);\r\n    -o-transform: rotate(180deg);\r\n    -ms-transform: rotate(180deg);\r\n    -webkit-transform: rotate(180deg);\r\n    -moz-transform: rotate(180deg);\r\n}\r\n\r\n#rotateG_08 {\r\n    left: 5px;\r\n    bottom: 4px;\r\n    animation-delay: 1.5s;\r\n    -o-animation-delay: 1.5s;\r\n    -ms-animation-delay: 1.5s;\r\n    -webkit-animation-delay: 1.5s;\r\n    -moz-animation-delay: 1.5s;\r\n    transform: rotate(-135deg);\r\n    -o-transform: rotate(-135deg);\r\n    -ms-transform: rotate(-135deg);\r\n    -webkit-transform: rotate(-135deg);\r\n    -moz-transform: rotate(-135deg);\r\n}\r\n\r\n@keyframes fadeG {\r\n    0% {\r\n        background-color: rgb(0, 0, 0);\r\n    }\r\n\r\n    100% {\r\n        background-color: rgb(255, 255, 255);\r\n    }\r\n}\r\n\r\n@-o-keyframes fadeG {\r\n    0% {\r\n        background-color: rgb(0, 0, 0);\r\n    }\r\n\r\n    100% {\r\n        background-color: rgb(255, 255, 255);\r\n    }\r\n}\r\n\r\n@-ms-keyframes fadeG {\r\n    0% {\r\n        background-color: rgb(0, 0, 0);\r\n    }\r\n\r\n    100% {\r\n        background-color: rgb(255, 255, 255);\r\n    }\r\n}\r\n\r\n@-webkit-keyframes fadeG {\r\n    0% {\r\n        background-color: rgb(0, 0, 0);\r\n    }\r\n\r\n    100% {\r\n        background-color: rgb(255, 255, 255);\r\n    }\r\n}\r\n\r\n@-moz-keyframes fadeG {\r\n    0% {\r\n        background-color: rgb(0, 0, 0);\r\n    }\r\n\r\n    100% {\r\n        background-color: rgb(255, 255, 255);\r\n    }\r\n}\r\n",""])},function(e,t,n){var r=n(8);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(1)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"#AddCoinWindow {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    background-color: var(---secondary-color);\r\n}\r\n\r\n#add-coin-form {\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n\r\n#add-coin-form > div {\r\n    margin: 3px;\r\n}\r\n\r\n.input-container {\r\n    display: flex;\r\n    justify-content: space-between;\r\n}\r\n\r\n.confirm-add-container {\r\n    display: flex;\r\n    justify-content: center;\r\n}\r\n\r\n.ticker-autocomplete {\r\n    position: absolute;\r\n    right: 0;\r\n    padding-right: 4px;\r\n    text-align: right;\r\n    max-height: 120px;\r\n    overflow-y: auto;\r\n    z-index: 99;\r\n    background-color: cyan;\r\n    color: black;\r\n    font: inherit;\r\n}\r\n\r\n.autocomplete-item {\r\n    padding: 4px;\r\n    margin: 2px;\r\n    display: none;\r\n    text-transform: capitalize;\r\n}\r\n\r\n.confirm-add {\r\n    padding: 3px 6px 3px 6px;\r\n    margin: 8px 4px 2px 4px;\r\n    background: linear-gradient(cyan, #9fa2c3);\r\n    color: black;\r\n    text-align: center;\r\n    width: 60px;\r\n    border-radius: 2.5px;\r\n}\r\n",""])},function(e,t,n){var r=n(10);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(1)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"#AppSettings {\r\n    display: grid;\r\n    background-color: var(---secondary-color);\r\n    justify-content: center;\r\n}\r\n\r\n.settings-item {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    margin: 10px;\r\n}\r\n\r\n.setting-item-padder {\r\n    height: 1px;\r\n    width: 40px;\r\n}\r\n.color-scheme-picker {\r\n    display: none;\r\n    grid-template-columns: 1fr 1fr;\r\n    margin: 5px;\r\n}\r\n\r\n.custom-select {\r\n    background-color: white;\r\n    color: black;\r\n    max-height: 25vh;\r\n    overflow-y: auto;\r\n    position: absolute;\r\n    z-index: 10;\r\n    padding: 4px;\r\n}\r\n\r\n.remove-versus-curr {\r\n    cursor: pointer;\r\n}\r\n",""])},function(e,t,n){var r=n(12);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(1)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"#coin-details {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    background-color: var(---secondary-color);\r\n    grid-column: 1;\r\n    grid-row: 1;\r\n    padding: 10px 5px;\r\n}\r\n\r\n.modal-container {\r\n    grid-column: 1;\r\n    grid-row: 1;\r\n    z-index: 999;\r\n    display: none;\r\n\r\n    justify-content: center;\r\n    align-content: center;\r\n    background-color: #092525a8;\r\n}\r\n\r\n.add-alert-modal {\r\n    display: grid;\r\n    grid-template-columns: 75px 75px;\r\n    grid-column-gap: 10px;\r\n    grid-row-gap: 7px;\r\n    background-color: var(---secondary-color);\r\n    padding: 20px 32px;\r\n}\r\n.add-alert-modal > input {\r\n    width: 75px;\r\n}\r\n.alert-title {\r\n    justify-self: center;\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\n.alert-bell {\r\n    height: 20px;\r\n}\r\n\r\n.trashcan {\r\n    height: 24px;\r\n    width: 24px;\r\n}\r\n\r\n.top-icons {\r\n    display: grid;\r\n    grid-template-columns: 24px 1fr 24px;\r\n}\r\n\r\n.remove-X {\r\n    font-size: 26px;\r\n}\r\n.perc-alert {\r\n    display: grid;\r\n    grid-template-columns:\r\n        minmax(min-content, max-content) minmax(min-content, max-content) minmax(min-content, max-content) 50px\r\n        minmax(min-content, max-content) auto;\r\n    margin: 6px;\r\n    grid-column-gap: 2px;\r\n    align-items: center;\r\n}\r\n.price-alert {\r\n    display: grid;\r\n    grid-template-columns:\r\n        minmax(min-content, max-content) minmax(min-content, max-content) minmax(min-content, max-content)\r\n        auto;\r\n    grid-column-gap: 2px;\r\n    margin: 6px;\r\n    align-items: center;\r\n}\r\n.perc-alert > input {\r\n    width: 40px;\r\n}\r\n.price-alert > input {\r\n    width: 127px;\r\n}\r\n.add-alert-modal .btn {\r\n    width: 60px;\r\n}\r\n.coin-details-alerts {\r\n    display: grid;\r\n    grid-template-columns: auto;\r\n    grid-column-gap: 10px;\r\n    grid-row-gap: 5px;\r\n    margin: 6px;\r\n    justify-content: center;\r\n}\r\n.coin-logo-big {\r\n    display: none;\r\n    width: 3rem;\r\n    height: auto;\r\n    vertical-align: middle;\r\n    margin: 0 auto;\r\n}\r\n.remove-btn {\r\n    width: 90px;\r\n}\r\n#add-amount-details {\r\n    width: 140px;\r\n}\r\n.details-data-container {\r\n    display: grid;\r\n    grid-template-rows: auto auto auto;\r\n}\r\n\r\n#details-data,\r\n.market-data-details {\r\n    display: grid;\r\n    grid-template-columns: auto auto;\r\n    grid-column-gap: 10px;\r\n    grid-row-gap: 4px;\r\n    margin: 6px;\r\n}\r\n.k {\r\n    align-self: center;\r\n}\r\n.v {\r\n    text-align: right;\r\n    justify-self: right;\r\n    align-self: center;\r\n}\r\n.details-shareM {\r\n    align-self: center;\r\n}\r\n",""])},function(e,t,n){var r=n(14);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(1)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,".legend-container {\r\n    width: 100%;\r\n    grid-row: 2;\r\n}\r\n\r\n.legend {\r\n    font-size: 0.95rem;\r\n    line-height: 0.95rem;\r\n    color: #a5b7b7;\r\n    white-space: nowrap;\r\n    background-color: inherit !important;\r\n    cursor: auto !important;\r\n}\r\n.legend > div:first-child {\r\n    align-items: flex-start;\r\n}\r\n\r\n.legend span {\r\n    cursor: pointer;\r\n}\r\n\r\n#portfolio {\r\n    grid-column: 1;\r\n    grid-row: 3;\r\n}\r\n.table {\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 100%;\r\n    overflow-y: auto;\r\n    /* max-width: 350px; */\r\n}\r\n.table-row {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    flex: 0 0 auto;\r\n    margin-bottom: 6px;\r\n    background-color: var(---secondary-color);\r\n    border-radius: 6px;\r\n    margin-left: 8px;\r\n    margin-right: 8px;\r\n    /*  transition-property: order;\r\n    transition-duration: 0.6s;\r\n    transition-delay: 0.3s;*/\r\n    cursor: pointer;\r\n}\r\n.table-cell {\r\n    display: flex;\r\n    flex: 1;\r\n    flex-direction: column;\r\n    align-items: flex-end;\r\n    justify-content: center;\r\n    margin: 6px 8px 6px 8px;\r\n    white-space: nowrap;\r\n}\r\n\r\n.table-cell > div {\r\n    margin: 2px;\r\n}\r\n\r\n.ticker-container {\r\n    flex-direction: row;\r\n    align-items: center;\r\n    justify-content: flex-start;\r\n}\r\n.l-t-a {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n.amount-container {\r\n    align-items: start;\r\n}\r\n.item-prices {\r\n    font-size: 0.9em;\r\n    flex-shrink: 0;\r\n}\r\n.item-values {\r\n    font-size: 0.9rem;\r\n    flex-shrink: 0;\r\n}\r\n@media (min-width: 0px) and (max-width: 361px) {\r\n    .item-prices > .btc-price {\r\n        display: none;\r\n    }\r\n    .item-prices > .change-btc {\r\n        display: none;\r\n    }\r\n    .item-values > .net-btc {\r\n        display: none;\r\n    }\r\n    .item-values > .net-btc-change {\r\n        display: none;\r\n    }\r\n}\r\n\r\n.changes {\r\n    flex: 0;\r\n}\r\n.coin-logo {\r\n    display: none;\r\n    width: 1.5rem;\r\n    height: auto;\r\n    vertical-align: middle;\r\n    margin: 0 auto;\r\n}\r\n",""])},function(e,t,n){var r=n(16);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(1)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(0)(!1)).push([e.i,"#about {\r\n    margin: 8px;\r\n    padding: 6px;\r\n    word-break: break-word;\r\n    overflow: auto;\r\n    background-color: var(---secondary-color);\r\n}\r\n\r\n#about a {\r\n    text-decoration: none;\r\n    color: #00b6ff;\r\n}\r\n",""])},function(e,t,n){"use strict";n.r(t);n(2);const r=function(e,t){let n,r=null;return"percentage"===t.type&&(n=e.toFixed(2)+"%"),"currency"===t.type&&(n="BTC"===t.currency?function(e){if("number"!=typeof e||isNaN(e))throw new Error("btc converter expected a number, instead got: "+e);if(Math.abs(e)<1e-4&&0!==e){let t=1e8*e,n=parseFloat(t.toPrecision(4)).toString(),r="sat";return{num:t,str:n,unit:r,combinedStrLeft:r+" "+n,combinedStrRight:n+" "+r}}if(Math.abs(e)<1&&0!==e){let t=1e3*e,n=parseFloat(t.toFixed(3)).toString(),r="mBTC";return{num:t,str:n,unit:r,combinedStrLeft:r+" "+n,combinedStrRight:n+" "+r}}let t=e,n=parseFloat(e.toFixed(3)).toString();return{num:t,str:n,unit:"BTC",combinedStrLeft:"BTC "+n,combinedStrRight:n+" BTC"}}(e).combinedStrRight:e>1?e.toLocaleString(t.lang,{style:"currency",currency:t.currency,maximumFractionDigits:t.digits,minimumFractionDigits:t.digits}):e.toLocaleString(t.lang,{style:"currency",currency:t.currency,maximumSignificantDigits:3})),t.isChange&&(n=function(e,t){return e>=0&&(t="+"+t),t}(e,n),r=e>=0?"green":"red"),null!==r?{str:n,color:r}:n};class i{constructor({id:e,amount:t,settings:n}){this.id=e,this._amount=t,this.settings=n,this.apiData={},this._cache={numerical:{},printable:{},wipe(){this.numerical={},this.printable={}}},Object.preventExtensions(this)}updateMarketData(e){if(!e)return!1;e!==this.apiData&&(this.apiData=e,this._cache.wipe(),window.EE.emit("itemChange",this.printableData))}get amount(){return this._amount}set amount(e){if("number"!=typeof e||isNaN(e))throw new Error("incorrect amount");this._amount=e,this._cache.wipe(),window.EE.emit("itemChange",{...this.printableData,__amountWasChanged__:!0})}get mcapUSD(){return this.getDataOrZero("market_cap","usd")}get netValue(){let e=this.amount;return this.getDataOrZero("current_price","usd")*e}getDataOrZero(e,t){try{let n=Number(this.apiData.market_data[e][t.toLowerCase()]);return isNaN(n)?0:n}catch(e){return 0}}get printableData(){return this.getPrintableDataAgainstCurrencies(this.settings.priceChangePeriod,this.settings.currentCurrencies.main,this.settings.currentCurrencies.second)}get printableDataVsAll(){let e=this.settings.versusCurrencies.map(e=>this.getPrintableDataAgainstCurrency(this.settings.priceChangePeriod,e));const t=this.id,n=this.apiData.symbol?this.apiData.symbol:"",r=this.apiData.name?this.apiData.name:t,i=this.apiData.image;return{id:t,amount:this.amount,symbol:n,name:r,icon:i,versusData:e}}getNumericalDataAgainstCurrency(e,t){let n=this.amount,r=e.toString()+t.toString();if(this._cache.numerical[r])return this._cache.numerical[r];t=t.toLowerCase();let i=this.getDataOrZero("current_price",t),o=i*n,s=this.getDataOrZero(`price_change_percentage_${e}_in_currency`,t),a={amount:n,price:i,net:o,changePerc:s,changeAbs:o-o/(1+s/100),ath:this.getDataOrZero("ath",t),mcap:this.getDataOrZero("market_cap",t)};return this._cache.numerical[r]=a,a}getPrintableDataAgainstCurrency(e,t){let n=e.toString()+t.toString();if(this._cache.printable[n])return this._cache.printable[n];let{amount:i,price:o,net:s,changePerc:a,changeAbs:c,ath:l,mcap:d}=this.getNumericalDataAgainstCurrency(e,t);const h=navigator.languages?navigator.languages[0]:navigator.language?navigator.language:"en-US",u={amount:i,price:o=r(o,{type:"currency",currency:t,lang:h}),net:s=r(s,{type:"currency",currency:t,lang:h}),changePerc:a=r(a,{type:"percentage",isChange:!0}),changeAbs:c=r(c,{type:"currency",currency:t,lang:h,isChange:!0}),ath:l=r(l,{type:"currency",currency:t,lang:h}),mcap:d=r(d,{type:"currency",currency:t,lang:h})};return this._cache.printable[n]=u,u}getPrintableDataAgainstCurrencies(){return{id:this.id}}}class o{constructor(e){this.settings=e,this.items={},this.__portfolioVersion__=.11,window.EE.on("changeItemAmount",this.changeItemAmount,this),window.EE.on("newMarketData",this.updateItem,this),window.EE.respond("itemStrings",this.getItemStrings,this),window.EE.respond("itemApiData",this.getItemApiData,this),window.EE.on("updatePortfolio",this.updatePortfolio,this),window.EE.respond("printableShares",()=>this.printableShares),window.EE.respond("printableDataVsAll",this.getCoinVersusData,this),Object.preventExtensions(this)}getItemApiData(e){return this.items[e].apiData}getItemStrings(e){return this.items[e].printableData}changeItemAmount(e,t){let n=Number(t.replace(",","."));return this.items[e].amount=n,"ok"}getCoinVersusData(e){return this.items[e].printableDataVsAll}getNumTotalValue(){let e=[],{versusCurrencies:t}=this.settings;for(let n of t){let t={currency:n,totalValue:0,changePerc:0,changeAbs:0};for(let e in this.items){let r=this.items[e].getNumericalDataAgainstCurrency(this.settings.priceChangePeriod,n);t.totalValue+=r.net,t.changeAbs+=r.changeAbs}t.changePerc=t.changeAbs/(t.totalValue-t.changeAbs)*100||0,e.push(t)}return e}getPrintableTotalValue(){const e=navigator.languages?navigator.languages[0]:navigator.language?navigator.language:"en-US";return this.getNumTotalValue().map(t=>{let{currency:n,totalValue:i,changePerc:o,changeAbs:s}=t;return{totalValue:i=r(i,{type:"currency",currency:n,lang:e}),changePerc:o=r(o,{type:"percentage",isChange:!0}),changeAbs:s=r(s,{type:"currency",currency:n,lang:e,isChange:!0})}})}get printableShares(){let e={},t=this.getNumTotalValue().find(e=>"USD"===e.currency);for(let n in this.items){let{net:i}=this.items[n].getNumericalDataAgainstCurrency(this.settings.priceChangePeriod,"USD");e[n]=r(i/t.totalValue*100,{type:"percentage",isChange:!1})}return e}get printableTotalValue(){return this.getPrintableTotalValue()}get mcapAsc(){return Object.keys(this.items).sort((e,t)=>{return this.items[e].mcapUSD-this.items[t].mcapUSD})}get mcapDsc(){return Object.keys(this.items).sort((e,t)=>{let n=this.items[e].mcapUSD;return this.items[t].mcapUSD-n})}get alphaAsc(){return Object.keys(this.items).sort((e,t)=>e.localeCompare(t))}get alphaDsc(){return Object.keys(this.items).sort((e,t)=>t.localeCompare(e))}get netvalAsc(){return Object.keys(this.items).sort((e,t)=>{return this.items[e].netValue-this.items[t].netValue})}get netvalDsc(){return Object.keys(this.items).sort((e,t)=>{let n=this.items[e].netValue;return this.items[t].netValue-n})}getSortedPortfolioNames(e){return this[e]}getItemStringsList(e){return this.getSortedPortfolioNames(e).map(e=>this.items[e].printableData)}get portfolioJSON(){let e={};return e.data=Object.keys(this.items).reduce((e,t)=>(e[t]={amount:this.items[t].amount},e),{}),e.__portfolioVersion__=this.__portfolioVersion__,e}initializeItems(e){let{__portfolioVersion__:t,data:n}=e;if(void 0===t||t<this.__portfolioVersion__)throw new Error(`incompatible portfolio version: ${e.__portfolioVersion__}`);for(let e in n)this.addItem(e,n[e].amount)}addItem(e,t){try{this.items[e]=new i({id:e,amount:t,settings:this.settings})}catch(e){window.DEBUG&&console.error(e)}}updateItem(e){let{id:t}=e;this.items[t].updateMarketData(e)}updatePortfolio(){for(let e in this.items)window.EE.emit("itemChange",this.items[e].printableData,this.items[e].printableDataVsAll)}}class s{constructor(e){this._version=1.14,this._portfolioSortedBy="netvalDsc",this._priceChangePeriod="24h",this._updateInterval=3e5,this.totalValSnapshotInterval=6e5,this._apiList=["coingecko"],this._networkMode="single",this._colorScheme={current:"default",default:{"--page-bg-color":"#590E79","--main-color":"#3e1350","---secondary-color":"#091919","--main-font-color":"#d3dbe6"},custom:{"--page-bg-color":"#590E79","--main-color":"#3e1350","---secondary-color":"#091919","--main-font-color":"#d3dbe6"}},this._currentCurrencies={main:"USD",second:"BTC"},this._versusCurrencies=["USD","BTC"],this.constants=e,window.EE.respond("settings",()=>this.settingsJSON),window.EE.on("addVersusCurrency",e=>{this._versusCurrencies.push(e),window.EE.emit("saveSettings"),window.EE.emit("updatePortfolio")}),window.EE.respond("removeVersusCurrency",e=>this.versusCurrencies.length>1&&(this.versusCurrencies=this.versusCurrencies.filter(t=>t!==e),window.EE.emit("saveSettings"),window.EE.emit("updatePortfolio"),!0)),Object.preventExtensions(this)}get version(){return this._version}set version(e){}get versusCurrencies(){return[...this._versusCurrencies]}set versusCurrencies(e){this._versusCurrencies=e}get currentCurrencies(){return this._currentCurrencies}set currentCurrencies(e){this._currentCurrencies=e}get colorScheme(){return this._colorScheme}set colorScheme(e){if("default"!==e)return e["--main-color"]?(this._colorScheme.custom=e,void(this._colorScheme.current="custom")):void(this._colorScheme={default:this._colorScheme.default,custom:e.custom,current:e.current});this._colorScheme.current="default"}get networkMode(){return this._networkMode}set networkMode(e){if("single"!==e)throw new Error("illegal network mode, reverting to default");this._networkMode=e}get priceChangePeriod(){return this._priceChangePeriod}set priceChangePeriod(e){if(!new Set(["24h","1h","7d","30d","60d","200d"]).has(e))throw new Error("illegal priceChangePeriod, reverting to default");this._priceChangePeriod=e}get portfolioSortedBy(){return this._portfolioSortedBy}set portfolioSortedBy(e){if(!new Set(["alphaAsc","alphaDsc","netvalAsc","netvalDsc","mcapAsc","mcapDsc"]).has(e))throw new Error("illegal sorted by setting, reverting to default");this._portfolioSortedBy=e}get updateInterval(){return this._updateInterval}set updateInterval(e){if(!(e>=this.constants.MIN_UPDATE_INTERVAL))throw new Error("illegal update interval setting, reverting to default");this._updateInterval=e}get apiList(){return this._apiList}set apiList(e){let t=new Set(e);this._apiList.forEach(e=>{if(!t.has(e))throw new Error("incorrect api list, reverting to default")}),this._apiList=e}get settingsJSON(){return{version:this.version,portfolioSortedBy:this.portfolioSortedBy,apiList:this.apiList,updateInterval:this.updateInterval,priceChangePeriod:this.priceChangePeriod,networkMode:this.networkMode,colorScheme:this.colorScheme,currentCurrencies:this.currentCurrencies,versusCurrencies:this.versusCurrencies}}importSettings(e){if(void 0===e.version||this.version>e.version)throw new Error(`oudated settings object: version ${e.version}; current version: ${this.version}`);for(let t in e)try{this[t]=e[t]}catch(e){console.error(e)}return"ok"}}class a{constructor(){this.nameMap=null,this.idMap=null,this.symbolMap=null,this.names=null,this.symbols=null,window.EE.respond("autocompleteList",this._getMatchesFromQuery,this),window.EE.respond("nameFromInput",this._getNameFromQuery,this),window.EE.respond("idFromInput",this._getIdFromQuery,this),Object.preventExtensions(this)}initizalizeList(e){let t=e.map(e=>[e.id,e]),n=e.map(e=>[e.name,e]),r=e.map(e=>[e.symbol,e]);this.nameMap=new Map(t),this.idMap=new Map(n),this.symbolMap=new Map(r),this.names=Array.from(this.nameMap.keys()),this.symbols=Array.from(this.symbolMap.keys())}_getMatchesFromQuery(e){let t=new RegExp(`^${e}`,"i");return[...this.names.filter(e=>t.test(e)),...this.symbols.filter(e=>t.test(e)).map(e=>e.toUpperCase())]}_getNameFromQuery(e){return e=e.toLowerCase(),this.nameMap.has(e)?this.nameMap.get(e).name:this.symbolMap.has(e)?this.symbolMap.get(e).name:"unknown"}isInList(e){return this.nameMap.has(e)||this.symbolMap.has(e)}_getIdFromQuery(e){let t=e.toLowerCase();return this.nameMap.has(t)?this.nameMap.get(t).id:this.symbolMap.has(t)?this.symbolMap.get(t).id:e}__testInteresection__(){let e=new Set(this.names),t=new Set(this.symbols),n=new Set([...e].filter(e=>t.has(e)));for(let e of n){this.nameMap.get(e),this.symbolMap.get(e)}console.info(n)}}class c{constructor(){this.priceNotifs={},this.percNotifs={},window.EE.on("newMarketData",this.onNewMarketData,this),window.EE.on("addNotification",this.addNotification,this),window.EE.on("removeNotification",this.removeNotification,this),window.EE.on("initNotifications",this.initializeNotification,this),window.EE.on("updateNotification",this.updateNotification,this),window.EE.respond("allAlerts",this.getAlerts,this),window.EE.on("removeAllNotifs",this.removeAllNotifs,this)}removeAllNotifs(e){delete this.percNotifs[e],delete this.priceNotifs[e],this.saveNotifications()}getAlerts(e){let t=[];return this.priceNotifs[e]&&(t=this.priceNotifs[e]),this.percNotifs[e]&&(t=t.concat(this.percNotifs[e])),t}addNotification(e){let{type:t,coinId:n}=e;if("price"===t){let t=this.createPriceNotif(e);this.priceNotifs[n]?this.priceNotifs[n].push(t):this.priceNotifs[n]=[t]}"perc"===t&&(e.lastNotification=0,e.notifId=window.lib.createId(),this.percNotifs[n]?this.percNotifs[n].push(e):this.percNotifs[n]=[e]),this.saveNotifications()}createPriceNotif(e){let t=window.EE.request("itemApiData",e.coinId).market_data.current_price[e.currency.toLowerCase()];return e.priceOnCreation=t,e.targetIsHigher=e.target>t,e.notifId=window.lib.createId(),e}removeNotification(e){"price"===e.type?this.priceNotifs[e.coinId]=this.priceNotifs[e.coinId].filter(t=>t!==e):this.percNotifs[e.coinId]=this.percNotifs[e.coinId].filter(t=>t!==e),this.saveNotifications()}updateNotification(){this.saveNotifications()}checkPriceNotifs(e){let t=e.id;this.priceNotifs[t].forEach(n=>{let r=e.market_data.current_price[n.currency.toLowerCase()];this.checkPriceNotifConditions(n,r)&&(window.EE.emit("showNotification",{notification:n,data:{price:r,name:e.name}}),this.priceNotifs[t]=this.priceNotifs[t].filter(e=>e!==n),this.saveNotifications())})}checkPercNotifs(e){let t=e.id;this.percNotifs[t].forEach(t=>{let n=e.market_data[`price_change_percentage_${t.period}_in_currency`][t.currency.toLowerCase()],r=e.market_data.current_price[t.currency.toLowerCase()],i=window.lib.periodStrToMs(t.period);Date.now()-t.lastNotification>i&&Math.abs(n)>parseFloat(t.percChange)&&(window.EE.emit("showNotification",{notification:t,data:{priceChange:n,currentPrice:r,name:e.name}}),t.lastNotification=Date.now(),this.saveNotifications())})}onNewMarketData(e){let t=e.id;this.priceNotifs[t]&&this.checkPriceNotifs(e),this.percNotifs[t]&&this.checkPercNotifs(e)}checkPriceNotifConditions(e,t){return e.targetIsHigher?t>e.target:t<e.target}getNotificationsJSON(){return{priceNotifs:this.priceNotifs,percNotifs:this.percNotifs}}saveNotifications(){window.EE.emit("saveNotifications",this.getNotificationsJSON())}initializeNotification(e){this.priceNotifs=e.priceNotifs||{},this.percNotifs=e.percNotifs||{}}}class l{constructor(e){this.versusCurrencies=[],this._settings=new s(e),this.NotificationsModel=new c,this._portfolioModel=new o(this.settings),this.SupportedCoins=new a,Object.preventExtensions(this),window.EE.respond("supportedVersusCurrencies",function(){return this.versusCurrencies},this)}get settings(){return this._settings}set settings(e){this._settings.importSettings(e)}get settingsJSON(){return this._settings.settingsJSON}get portfolioJSON(){return this._portfolioModel.portfolioJSON}get total(){return this._portfolioModel.printableTotalValue}get sortedPortfolioNames(){return this._portfolioModel.getSortedPortfolioNames(this.settings.portfolioSortedBy)}get itemStringsList(){return this._portfolioModel.getItemStringsList(this.settings.portfolioSortedBy)}createItemModels(e){this._portfolioModel.initializeItems(e)}addItem(e,t){return void 0===this._portfolioModel.items[e]?(this._portfolioModel.addItem(e,t),"ok"):"This item already in portfolio"}deleteItem(e){delete this._portfolioModel.items[e]}}const d={createNode:function({tag:e,innerHTML:t,id:n,cssClass:r,appendTo:i}){const o=document.createElement(e);return t&&(o.innerHTML=t),n&&(o.id=n),r&&o.classList.add(...r.split(" ")),i&&i.appendChild(o),o},createComponent:function(e,t){const n=(new DOMParser).parseFromString(e,"text/html").body.firstChild;return t&&t.appendChild(n),n}};n(5);class h{constructor(e){this.node=d.createComponent('<div id="floatingBarsG">\n\t<div class="blockG" id="rotateG_01"></div>\n\t<div class="blockG" id="rotateG_02"></div>\n\t<div class="blockG" id="rotateG_03"></div>\n\t<div class="blockG" id="rotateG_04"></div>\n\t<div class="blockG" id="rotateG_05"></div>\n\t<div class="blockG" id="rotateG_06"></div>\n\t<div class="blockG" id="rotateG_07"></div>\n\t<div class="blockG" id="rotateG_08"></div>\n</div>',e)}show(){this.node.style.display="block"}hide(){this.node.style.display="none"}}class u{constructor(e){this.node=d.createComponent('\n          <div id="apphead" style="display: grid;\n            grid-template-columns: 60px 1fr 60px;">\n            <div id="head-left">\n            </div>\n            <div id="head-center" style="justify-self:center;">\n            <span id="head-message">\n            </span>&nbsp&nbsp\n            <span id="hide-message-btn" style="visibility:hidden">╳</span>\n\n            </div>\n            <div id="head-right">\n\n            </div>\n          </div>',e),this.Spinner=new h(this.node.querySelector("#head-left")),this.headMessage=this.node.querySelector("#head-message"),this.hideMessageButton=this.node.querySelector("#hide-message-btn"),this.hideMessageButton.addEventListener("click",()=>{this.wipeHeadMessage()})}showSpinner(){this.Spinner.show()}hideSpinner(){this.Spinner.hide()}renderHeadMessage(e){this.headMessage.style.color="error"===e.type?"red":"var(--main-font-color)",this.headMessage.textContent=e.body,this.hideMessageButton.style.visibility="visible"}wipeHeadMessage(){this.headMessage.textContent="",this.hideMessageButton.style.visibility="hidden"}clearErrorMessage(e){this.headMessage.textContent===e&&this.wipeHeadMessage()}}n(7);const p=150;class m{constructor(e,t){this.node=d.createComponent('\n      <div class="ticker-autocomplete"></div>\n      ',t),this.autocompleteSlots=[];for(let e=0;e<p;e++)setTimeout(()=>{let e=d.createComponent('<div class="autocomplete-item"></div>');this.node.appendChild(e),this.autocompleteSlots.push(e)},0);this.node.addEventListener("mousedown",e)}renderList(e){for(let t=(e=(e=e.forEach?e:[]).slice(0,this.autocompleteSlots.length)).length;t<this.autocompleteSlots.length;t++)this.autocompleteSlots[t].style.display="none";for(let t=0;t<e.length;t++)this.autocompleteSlots[t].textContent=e[t],this.autocompleteSlots[t].style.display="block"}}class g{constructor(e,t){this.node=d.createComponent('\n          <div class="page-container">\n        <div  id="AddCoinWindow">\n          <form id="add-coin-form">\n          <div style="display:flex;margin-top:4px;"><span style="margin-right:11px">Name:</span> <span class="full-name"></span>\n          </div>\n\n          <div class="input-container" >\n          <label for="add-symbol"> Coin:</label>\n          <div style="position:relative">\n          <input class="add-inp inp" type="text" name="symbol" id="add-symbol" minlength=1 autocomplete="off" maxlength=8 />\n\n          </div>\n          </div>\n\n          <div class="input-container" >\n          <label for="add-amount"> Amount:</label> <input class="add-inp inp" autocomplete="off" type="number" name="amount" id="add-amount"  size=16 />\n          </div>\n          <div class="message" style="color:red; text-align:center;"> </div>\n          <div class="confirm-add-container"> <div class="confirm-add btn"> ADD </div> </div>\n          </form>\n        </div>\n        </div>'),this.confirm=this.node.querySelector(".confirm-add"),this.tickerField=this.node.querySelector("input[name=symbol]"),this.fullName=this.node.querySelector(".full-name"),this.amountField=this.node.querySelector("input[name=amount]"),this.message=this.node.querySelector(".message"),this.autocompleteItemHandler=this.autocompleteItemHandler.bind(this),this.autocompleteField=new m(this.autocompleteItemHandler,this.tickerField.parentNode),this.addListeners(e,t)}addListeners(e,t){this.tickerField.addEventListener("blur",()=>{this.renderAutocomplete([]),clearTimeout(n)}),this.tickerField.addEventListener("keydown",e=>{"Enter"!==e.code&&"Enter"!==e.key||(""===this.amountField.value&&""!==this.tickerField.value?this.amountField.focus():this.confirm.click())});let n=null;this.tickerField.addEventListener("input",()=>{this.message.textContent="",this.fullName.textContent=""===this.tickerField.value?"":window.EE.request("nameFromInput",this.tickerField.value),clearTimeout(n),n=setTimeout(()=>{const e=window.EE.request("autocompleteList",this.tickerField.value);this.renderAutocomplete(e)},50)}),this.amountField.addEventListener("input",()=>{this.message.textContent=""}),this.amountField.addEventListener("keydown",e=>{"Enter"!==e.code&&"Enter"!==e.key||this.confirm.click()}),this.confirm.addEventListener("click",()=>{if(""===this.tickerField.value)return void this.tickerField.focus();if(""===this.amountField.value)return void this.amountField.focus();let n=e(this.tickerField.value,this.amountField.value);"ok"===n?(t(""),this.message.textContent="",this.amountField.value="",this.tickerField.value="",this.fullName.textContent=""):this.message.textContent=n})}renderAutocomplete(e){this.autocompleteField.renderList(e)}autocompleteItemHandler(e){this.tickerField.value=e.target.innerText,this.fullName.textContent=window.EE.request("nameFromInput",e.target.innerText)}}n(9);class f{constructor(e){this.node=d.createComponent(`\n          <div>\n          <span class="versus-curr-name">${e}</span>\n          <span class="remove-versus-curr">x</span>\n          </div>`),this.node.querySelector(".remove-versus-curr").addEventListener("click",()=>{window.EE.request("removeVersusCurrency",this.node.querySelector(".versus-curr-name").textContent)&&this.node.parentNode.removeChild(this.node)})}}class v{constructor(e){this.node=d.createComponent('\n      <div class="custom-select">\n\n      </div>'),this.node.style.display="none",document.addEventListener("click",e=>{"dont_hide"!==e.data&&(this.node.style.display="none")}),this.node.addEventListener("click",t=>{e(t.target.dataset.value),window.EE.emit("addVersusCurrency",t.target.dataset.value),this.node.style.display="none"})}addOptions(){let e=window.EE.request("supportedVersusCurrencies"),t=window.EE.request("settings"),n=new Set(t.versusCurrencies);for(let t of e)!1===n.has(t)&&this.add(t)}add(e){let t=document.createElement("div");t.textContent=e,t.dataset.value=e,t.style.cursor="default",this.node.appendChild(t)}render(){this.node.style.display="block",window.lib.wipeChildren(this.node),this.addOptions()}}class y{constructor(){this.node=d.createComponent('\n      <div class="settings-item">\n        <span>Versus currencies: </span><span class="setting-item-padder"> </span>\n        <div id="versus-currencies" >\n        <div id="add-versus-currency" class="btn">\n        ADD\n        </div>\n\n        </div>\n      </div>'),this.versusCurrencies=this.node.querySelector("#versus-currencies"),this.currencySelect=new v(this.addVersusCurrency.bind(this)),this.node.querySelector("#add-versus-currency").addEventListener("click",e=>{this.currencySelect.render(),e.data="dont_hide"}),this.node.querySelector("#versus-currencies").appendChild(this.currencySelect.node)}addOptions(e,t){this.currencySelect.addOptions(e,t)}addVersusCurrency(e){let t=new f(e);this.versusCurrencies.appendChild(t.node)}render(e){let{versusCurrencies:t}=e;for(let e of t)this.addVersusCurrency(e)}}class w{constructor(e,t){this.node=d.createComponent('\n            <div class="page-container">\n            <div id="AppSettings" >\n            <div class="settings-item">\n              <span id="about-btn" class="clickable">About</span>\n\n            </div>\n            <div class="settings-item">\n              <span>Sync interval:</span><span class="setting-item-padder"> </span>\n              <select id="update-interval-select" >\n                <option value="2 min">2 min</option>\n                <option value="5 min">5 min</option>\n                <option value="15 min">15 min</option>\n              </select>\n            </div>\n\n\n\n\n\n            <div class="settings-item" id="color-scheme">\n              <span>Color scheme: </span><span class="setting-item-padder"> </span>\n              <select id="color-scheme-select" >\n                <option value="default">Default</option>\n                <option value="custom">Custom</option>\n              </select>\n            </div>\n\n\n\n            <div class="color-scheme-picker">\n            <span>Primary color: </span> <input type="color" id="primary-color" class="color-picker"> </input>\n            <span>Secondary color: </span> <input type="color" id="secondary-color" class="color-picker"> </input>\n            <span>Site background: </span> <input type="color" id="global-bg" class="color-picker"> </input>\n            <span>Text color: </span> <input type="color" id="text-color" class="color-picker"> </input>\n            </div>\n\n            <div class="message"> </div>\n            </div>\n            </div>\n          '),this.aboutBtn=this.node.querySelector("#about-btn"),this.updateIntervalSelect=this.node.querySelector("#update-interval-select"),this.versusCurrencies=new y,this.node.querySelector("#AppSettings").insertBefore(this.versusCurrencies.node,this.node.querySelector("#color-scheme")),this.colorSchemeSelect=this.node.querySelector("#color-scheme-select"),this.colorSchemePicker=this.node.querySelector(".color-scheme-picker"),this.primaryColor=this.node.querySelector("#primary-color"),this.secondaryColor=this.node.querySelector("#secondary-color"),this.globalBgColor=this.node.querySelector("#global-bg"),this.textColor=this.node.querySelector("#text-color"),this.message=this.node.querySelector(".message"),this.aboutBtn.addEventListener("click",()=>{t()}),this.updateIntervalSelect.addEventListener("change",()=>{e("interval",this.updateIntervalSelect.value)}),this.colorSchemeSelect.addEventListener("change",()=>{"default"===this.colorSchemeSelect.value?(e("colorScheme",this.colorSchemeSelect.value),this.colorSchemePicker.style.display="none"):(this.colorSchemePicker.style.display="grid",e("colorScheme",this.currentCustomScheme))}),this.node.querySelectorAll(".color-picker").forEach(t=>{t.addEventListener("change",()=>{e("colorScheme",this.currentCustomScheme)})})}get currentCustomScheme(){return{"--main-color":this.primaryColor.value,"---secondary-color":this.secondaryColor.value,"--page-bg-color":this.globalBgColor.value,"--main-font-color":this.textColor.value}}render(e){try{this.updateIntervalSelect.querySelector(`[value="${e.updateInterval/6e4} min"]`).selected=!0,this.versusCurrencies.render(e),this.primaryColor.value=e.colorScheme.custom["--main-color"],this.secondaryColor.value=e.colorScheme.custom["---secondary-color"],this.textColor.value=e.colorScheme.custom["--main-font-color"],this.globalBgColor.value=e.colorScheme.custom["--page-bg-color"],"custom"===e.colorScheme.current&&(this.colorSchemeSelect.value="custom",this.colorSchemePicker.style.display="grid")}catch(e){window.DEBUG&&console.error(e)}}addAllCurrencyOptions(e,t){this.versusCurrencies.addOptions(e,t)}}n(11);const b='<svg class="alert-bell" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 459.3 459.3">\n<path class="svgbody" d="M175.2 404.5c0 0.1 0 0.2 0 0.4 0 30.1 24.4 54.5 54.5 54.5s54.5-24.4 54.5-54.5c0-0.1 0-0.2 0-0.4H175.2z"/>\n<path class="svgbody" d="M403.5 336.4l-49-72c0-22 0-75.9 0-89.8 0-60.6-43.1-111.1-100.4-122.5V24.5C254.2 11 243.2 0 229.7 0s-24.5 11-24.5 24.5v27.7c-57.2 11.4-100.4 61.9-100.4 122.5 0 23.7 0 76.1 0 89.8l-49 72c-5.2 7.6-5.7 17.4-1.4 25.5 4.3 8.1 12.7 13.2 21.9 13.2H383.1c9.2 0 17.6-5.1 21.9-13.2C409.3 353.8 408.7 344 403.5 336.4z"/>\n</svg>',S='<svg class="trashcan clickable"  xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd">\n<path class="svgbody" d="M19 24h-14c-1.104 0-2-.896-2-2v-16h18v16c0 1.104-.896 2-2 2m-9-14c0-.552-.448-1-1-1s-1 .448-1 1v9c0 .552.448 1 1 1s1-.448 1-1v-9zm6 0c0-.552-.448-1-1-1s-1 .448-1 1v9c0 .552.448 1 1 1s1-.448 1-1v-9zm6-5h-20v-2h6v-1.5c0-.827.673-1.5 1.5-1.5h5c.825 0 1.5.671 1.5 1.5v1.5h6v2zm-12-2h4v-1h-4v1z"/></svg>';class C{constructor(){this.node=d.createComponent('\n          <select class="currency-select">\n          </select>')}render(e){e.forEach(e=>{let t=this.createOptionForCurrSelect(e);this.node.appendChild(t)})}renderDefault(){let e=window.EE.request("supportedVersusCurrencies");this.render(e)}selectCurrent(e){this.node.querySelector(`[value="${e}"]`).selected=!0}createOptionForCurrSelect(e){let t=document.createElement("option");return t.value=e,t.textContent=e,t}}class x{constructor(e,t){this.node=d.createComponent('\n      <div class="add-alert-modal">\n\n      <div>\n      Alert type:\n      </div>\n\n\n      <select class="alert-type">\n      <option value="price"> Price</option>\n      <option value="perc"> Percentage</option>\n      </select>\n\n\n      <label for="target-alert-inp" class="type-price"> Price:</label>\n      <input class="type-price inp" autocomplete="off" type="number" name="amount" id="target-alert-inp"  size=16></input>\n\n\n      <label class="type-perc" for="perc-alert-inp"> Percentage change:</label>\n      <input class="type-perc inp" autocomplete="off" type="number" name="amount" id="perc-alert-inp"  size=16></input>\n\n      <div class="type-perc">Period: </div>\n\n      <select class="period-select type-perc">\n      <option value="1h"> 1h</option>\n      <option value="24h"> 24h</option>\n      <option value="7d"> 7d</option>\n      </select>\n\n      <div>\n      Currency:\n      </div>\n\n\n      <div class="currency-select-container">\n      </div>\n\n\n      <div class="btn cancel"> cancel </div> <div class="btn ok"> ok </div>\n      </div>\n      '),this.id=null,this.alertType=this.node.querySelector(".alert-type"),this.priceInput=this.node.querySelector("input.type-price"),this.changeInput=this.node.querySelector("input.type-perc"),this.changePeriod=this.node.querySelector(".period-select"),this.currencySelect=new C,this.node.querySelector(".currency-select-container").appendChild(this.currencySelect.node),this.cancel=this.node.querySelector(".cancel"),this.ok=this.node.querySelector(".ok"),this.alertType.addEventListener("change",()=>{"price"===this.alertType.value?(this.node.querySelectorAll(".type-price").forEach(e=>e.style.display="block"),this.node.querySelectorAll(".type-perc").forEach(e=>e.style.display="none")):(this.node.querySelectorAll(".type-price").forEach(e=>e.style.display="none"),this.node.querySelectorAll(".type-perc").forEach(e=>e.style.display="block"))}),this.ok.addEventListener("click",()=>{let n=this.alertType.value,r={type:n};"price"===n?r.target=Number(this.priceInput.value):(r.percChange=this.changeInput.value,r.period=this.changePeriod.value),r.coinId=this.id,r.currency=this.currencySelect.node.value,window.EE.emit("addNotification",r),t(this.id),e()}),this.cancel.addEventListener("click",()=>{e()}),this.currencySelect.node.addEventListener("change",()=>{this.renderPriceInput(this.currencySelect.node.value)})}render(e){this.renderCurrencySelects(),this.alertType.dispatchEvent(new Event("change")),this.id=e,this.renderPriceInput()}renderPriceInput(e){let t=window.EE.request("itemApiData",this.id).market_data;e||(e=window.EE.request("settings").currentCurrencies.main),this.priceInput.value=window.lib.toFixedCurrency(t.current_price[e.toLowerCase()])}renderCurrencySelects(){let e=window.EE.request("supportedVersusCurrencies"),t=window.EE.request("settings").currentCurrencies.main;this.currencySelect.render(e),this.currencySelect.selectCurrent(t)}}class E{constructor(e,t){this.node=d.createComponent(`\n      <div class="coin-details-alerts">\n\n        <div class="alert-title">Alerts ${b}</div>\n        <div class="alert-container">\n        <div class="price-alerts-container"> </div>\n<div class="perc-alerts-container"> </div>\n        <div> </div>\n        </div>\n        <div class="errormsg" style="color:red; justify-self:center"> </div>\n         <div class="add-alert btn" style="justify-self:center; width:80px">new alert</div>\n      </div>`,e),this.modalContainer=t,this.coinId=null,this.errorMsg=this.node.querySelector(".errormsg"),this.addAlert=new x(()=>{this.modalContainer.innerHTML="",this.modalContainer.style.display="none"},this.render.bind(this)),this.percAlertTemplate='\n        <div class="perc-alert">\n        <div>Change:</div>\n        <input class="inp" autocomplete="off" type="number" name="percentage"  size=16></input>\n        <div>%</div>\n        <select class="period-select">\n        <option value="1h"> 1h</option>\n        <option value="24h"> 24h</option>\n        <option value="7d"> 7d</option>\n        </select>\n        <div class="currency-container"> </div>\n        <div class="remove-X clickable">×</div>\n        </div>',this.percAlertContainer=this.node.querySelector(".perc-alerts-container"),this.priceAlertTemplate='\n        <div class="price-alert">\n        <div>Price:</div>\n        <input class="inp" autocomplete="off" type="number" name="amount"  size=16></input>\n        <div class="currency-container"> </div>\n        <div class="remove-X clickable">×</div>\n\n        </div>',this.priceAlertsContainer=this.node.querySelector(".price-alerts-container"),this.node.querySelector(".add-alert").addEventListener("click",()=>{if("Notification"in window)return"granted"!==Notification.permission?(Notification.requestPermission(),void(this.errorMsg.textContent="Please enable notifications")):void("market_data"in window.EE.request("itemApiData",this.coinId)?(this.errorMsg.textContent="",this.modalContainer.innerHTML="",this.modalContainer.appendChild(this.addAlert.node),this.modalContainer.style.display="grid",this.addAlert.render(this.coinId)):this.errorMsg.textContent="Alerts are not available for this coin");this.errorMsg.textContent="Notifications are not supported in your browser"})}render(e){this.errorMsg.textContent="",this.modalContainer.style.display="none",this.coinId=e,window.lib.wipeChildren(this.priceAlertsContainer),window.lib.wipeChildren(this.percAlertContainer),window.EE.request("allAlerts",e).forEach(e=>{"price"===e.type&&this.renderPriceAlert(e),"perc"===e.type&&this.renderPercAlert(e)})}renderPercAlert(e){let t=d.createComponent(this.percAlertTemplate);t.querySelector("input").value=e.percChange,t.querySelector("input").addEventListener("change",t=>{e.percChange=Number(t.target.value),e.lastNotification=0,window.EE.emit("updateNotification")}),t.querySelector("select").querySelector(`[value="${e.period}"]`).selected=!0,t.querySelector("select").addEventListener("change",t=>{e.period=t.target.value,e.lastNotification=0,window.EE.emit("updateNotification")}),t.querySelector(".remove-X").addEventListener("click",()=>{window.EE.emit("removeNotification",e),this.percAlertContainer.removeChild(t)});let n=new C;t.querySelector(".currency-container").appendChild(n.node),n.renderDefault(),n.selectCurrent(e.currency),n.node.addEventListener("change",()=>{e.lastNotification=0,e.currency=n.node.value,window.EE.emit("updateNotification")}),t.dataset.coinId=e.coinId,t.dataset.notifId=e.notifId,this.percAlertContainer.appendChild(t)}renderPriceAlert(e){let t=d.createComponent(this.priceAlertTemplate),n=new C;t.querySelector(".currency-container").appendChild(n.node),n.renderDefault(),n.selectCurrent(e.currency),n.node.addEventListener("change",()=>{e.currency=n.node.value,window.EE.emit("updateNotification")}),t.querySelector("input").value=e.target,t.querySelector("input").addEventListener("change",t=>{e.target=Number(t.target.value);let n=window.EE.request("itemApiData",e.coinId).market_data;e.priceOnCreation=n.current_price[e.currency.toLowerCase()],e.targetIsHigher=e.target>e.priceOnCreation,window.EE.emit("updateNotification")}),t.querySelector(".remove-X").addEventListener("click",()=>{window.EE.emit("removeNotification",e),this.priceAlertsContainer.removeChild(t)}),t.dataset.coinId=e.coinId,t.dataset.notifId=e.notifId,this.priceAlertsContainer.appendChild(t)}}class k{constructor(){this.node=d.createComponent('\n      <div class="market-data-details">\n\n      <div class="k">Price:</div>  <div class="v details-prices"> </div>\n\n      <div class="k">ATH:</div> <div class="v details-aths"> </div>\n\n      <div class="k">Marketcap:</div> <div class="v details-mcaps"> </div>\n\n      </div>\n      '),this.prices=this.node.querySelector(".details-prices"),this.aths=this.node.querySelector(".details-aths"),this.mcaps=this.node.querySelector(".details-mcaps")}renderPrices(e){let t=d.createComponent('\n    <div class="v"> </div>\n    ');t.textContent=e.price,this.prices.appendChild(t)}renderAths(e){let t=d.createComponent('\n  <div class="v"> </div>\n  ');t.textContent=e.ath,this.aths.appendChild(t)}renderMcaps(e){let t=d.createComponent('\n  <div class="v"> </div>\n  ');t.textContent=e.mcap,this.mcaps.appendChild(t)}render(e){window.lib.wipeChildren(this.prices),window.lib.wipeChildren(this.aths),window.lib.wipeChildren(this.mcaps);for(let t of e)this.renderPrices(t),this.renderAths(t),this.renderMcaps(t)}}class _{constructor(e,t){this.node=d.createComponent(`\n          <div class="page-container">\n\n          <div class="modal-container">\n\n          </div>\n\n          <div id="coin-details" >\n\n\n\n\n            <div class="details-data-container">\n\n            <div>\n\n            <div class="top-icons">\n              <div> </div>\n             <div><img class="coin-logo-big"></div>\n            <div class="remove-btn-icon"> ${S}</div>\n            </div>\n\n            <div id="details-data" >\n\n            <div>Coin:</div>\n            <div class="full-name v"></div>\n\n            <label for="add-amount-details"> Amount:</label>\n            <input class="add-inp v inp" autocomplete="off" type="number" name="amount" id="add-amount-details"  size=16></input>\n\n\n\n\n\n            <div class="k">Value:</div> <div class="details-values"></div>\n\n            <div class="k">Portfolio share:</div> <div class="details-shareM v"> </div>\n\n\n\n\n\n            </div>\n\n            </div>\n\n              <div class="market-data-details-container">\n\n              </div>\n\n\n              <div class="coin-details-alerts-container">\n\n              </div>\n\n\n          </div>\n\n\n            <div class="message" style="color:red; text-align:center;"> </div>\n\n          </div>\n          </div>\n          `),this.name=this.node.querySelector(".full-name"),this.amountField=this.node.querySelector("input[name=amount]"),this.icon=this.node.querySelector(".coin-logo-big"),this.values=this.node.querySelector(".details-values"),this.share=this.node.querySelector(".details-shareM"),this.remove=this.node.querySelector(".remove-btn-icon"),this.message=this.node.querySelector(".message"),this.marketDataDetails=new k,this.node.querySelector(".market-data-details-container").appendChild(this.marketDataDetails.node),this.Alerts=new E(this.node.querySelector(".coin-details-alerts-container"),this.node.querySelector(".modal-container")),this.currentItem=null,this.remove.addEventListener("click",()=>{e(this.currentItem),t("")}),this.amountField.addEventListener("change",()=>{""!==this.amountField.value&&window.EE.emit("changeItemAmount",this.currentItem,this.amountField.value)}),this.amountField.addEventListener("keydown",e=>{"Enter"!==e.code&&"Enter"!==e.key||this.amountField.blur()}),this.render=function(e){t("/CoinDetails"),this.currentItem=e.id;let n=window.EE.request("printableDataVsAll",e.id),r=n.versusData;this.amountField.value=n.amount,this.name.textContent=`${n.name} ${n.symbol}`,this.renderIcon(n.icon),this.renderValues(r),this.renderShare(),this.marketDataDetails.render(r),this.Alerts.render(this.currentItem)}.bind(this),window.EE.on("itemChange",function(e){this.currentItem===e.id&&this.render(e)},this)}renderIcon(e){e?(this.icon.src=e,this.icon.style.display="block"):this.icon.style.display="none"}renderShare(){this.share.textContent=window.EE.request("printableShares")[this.currentItem]}renderValues(e){window.lib.wipeChildren(this.values);for(let t of e){let e=d.createComponent('\n  <div class="v"> </div>\n  ');e.textContent=t.net,this.values.appendChild(e)}}onUnmount(){this.currentItem=null}}class N{constructor(e,t,n,r){this.node=d.createNode({tag:"div",cssClass:"table-row",innerHTML:'\n    <div class="table-cell ticker-container">\n    <div class="l-t-a">\n    <img class="coin-logo" alt="">\n    <div class="ticker"></div>\n    <div class="amount"></div>\n    </div>\n    </div>\n\n    <div class="table-cell item-prices">\n    <div class="usd-price"></div>\n    <div class="change-usd"></div>\n    <div class="btc-price"></div>\n    <div class="change-btc"></div>\n    </div>\n\n    <div class="table-cell item-values">\n    <div class="netUSD"></div>\n    <div class="net-usd-change"> </div>\n    <div class="net-btc"></div>\n    <div class="net-btc-change"> </div>\n\n    </div>\n    '}),this.node.style.order=n,this.amount=this.node.querySelector(".amount"),this.symbol=this.node.querySelector(".ticker"),this.itemPrices=this.node.querySelector(".item-prices"),this.itemNetValues=this.node.querySelector(".item-values"),this.priceUSD=this.node.querySelector(".usd-price"),this.priceBTC=this.node.querySelector(".btc-price"),this.netUSD=this.node.querySelector(".netUSD"),this.netBTC=this.node.querySelector(".net-btc"),this.icon=this.node.querySelector(".coin-logo"),this.changeUSD=this.node.querySelector(".change-usd"),this.changeBTC=this.node.querySelector(".change-btc"),this.changeNetUsd=this.node.querySelector(".net-usd-change"),this.changeNetBTC=this.node.querySelector(".net-btc-change"),"doge"===e.name&&(this.symbol.style["font-family"]='"Comic Sans MS", cursive, sans-serif');const i=e.id;this.render(e,r),this.node.addEventListener("click",()=>{t(i)},!1)}render(e){let t=window.EE.request("printableDataVsAll",e.id);t.icon&&(this.icon.src=t.icon,this.icon.style.display="block"),this.amount.textContent=t.amount,this.symbol.textContent=t.symbol||t.id,window.lib.wipeChildren(this.itemPrices),window.lib.wipeChildren(this.itemNetValues),t.versusData.forEach(e=>{this.renderVersusData(e)})}renderVersusData(e){let{price:t,changePerc:n,changeAbs:r,net:i}=e,o=document.createElement("div");o.textContent=t;let s=document.createElement("div");s.textContent=n.str,s.style.color=n.color;let a=document.createElement("div");a.textContent=r.str,a.style.color=r.color;let c=document.createElement("div");c.textContent=i,this.itemPrices.appendChild(o),this.itemPrices.appendChild(s),this.itemNetValues.appendChild(c),this.itemNetValues.appendChild(a)}}n(13);class I{constructor(e){this.node=d.createNode({tag:"div",id:"portfolio",cssClass:"table"}),this.openDetails=e,this.items={},window.EE.on("itemChange",this.renderItem,this)}addItem(e,t){let n=new N(e,this.openDetails,t);this.items[e.id]=n,this.node.appendChild(n.node)}removeItem(e){this.node.removeChild(this.items[e].node),delete this.items[e]}sortView(e){e.forEach((e,t)=>{this.items[e].node.style.order=t+1})}renderItem(e){this.items[e.id].render(e)}}class A{constructor(){this.node=d.createComponent('\n          <div id="networth">\n          </div>')}render(e){window.lib.wipeChildren(this.node);for(let t of e)this.renderItem(t)}renderItem(e){let t=d.createComponent('\n        <div>\n\n        <div  class="total-val">\n        </div>\n        <div>\n        <span  class="net-changes change-perc">\n        </span>\n        <span  class="net-changes">\n        /\n        </span>\n        <span class="net-changes change-abs">\n        </span>\n        </div>\n\n        </div>\n'),n=t.querySelector(".total-val"),r=t.querySelector(".change-perc"),i=t.querySelector(".change-abs");n.textContent=e.totalValue,r.textContent=e.changePerc.str,i.textContent=e.changeAbs.str,r.style.color=e.changePerc.color,i.style.color=e.changeAbs.color,this.node.appendChild(t)}}class D{constructor(e,t){this.node=d.createNode({tag:"div",cssClass:"legend-container",innerHTML:'\n            <div class="table-row legend">\n        <div class="table-cell"> <span class="coinL">coin ⇵</span></div>\n          <div class="table-cell"><span class="pricesL"> prices ⇵</span></div>\n             <div class="table-cell"><span class=" valueL">value ⇵ </span></div>\n             </div>\n      ',appendTo:e}),this.resetArrows=this.resetArrows.bind(this),this.coin=this.node.querySelector(".coinL"),this.prices=this.node.querySelector(".pricesL"),this.value=this.node.querySelector(".valueL"),this.state={coin:"alphaAsc",prices:"marketcapDesc",value:"netvalDesc"},this.coin.addEventListener("click",()=>{this.resetArrows(),"alphaAsc"===this.state.coin?(t.sortByAlphaAsc(),this.coin.textContent="coin ↑",this.state.coin="alphaDsc"):"alphaDsc"===this.state.coin&&(this.coin.textContent="coin ↓",t.sortByAlphaDsc(),this.state.coin="alphaAsc")}),this.prices.addEventListener("click",()=>{this.resetArrows(),"marketcapAsc"===this.state.prices?(this.prices.textContent="prices ↑",t.sortByMcapAsc(),this.state.prices="marketcapDesc"):"marketcapDesc"===this.state.prices&&(this.prices.textContent="prices ↓",t.sortByMcapDsc(),this.state.prices="marketcapAsc")}),this.value.addEventListener("click",()=>{this.resetArrows(),"netvalAsc"===this.state.value?(this.value.textContent="value ↑",t.sortByNetvalAsc(),this.state.value="netvalDesc"):"netvalDesc"===this.state.value&&(this.value.textContent="value ↓",t.sortByNetvalDsc(),this.state.value="netvalAsc")})}renderInit(e){switch(e){case"alphaAsc":this.coin.textContent="coin ↑";break;case"alphaDsc":this.coin.textContent="coin ↓";break;case"mcapAsc":this.prices.textContent="prices ↑";break;case"mcapDsc":this.prices.textContent="prices ↓";break;case"netvalAsc":this.value.textContent="value ↑";break;case"netvalDsc":this.value.textContent="value ↓"}}resetArrows(){this.coin.textContent="coin ⇵",this.prices.textContent="prices ⇵",this.value.textContent="value ⇵"}}class M{constructor(e,t){this.node=d.createComponent('\n          <div id="change-period-buttons">\n          <div>\n          <div class="change-period-btn" data-option="1h">1 hour</div>\n          <div class="change-period-btn" data-option="24h">24 hours</div>\n          <div class="change-period-btn" data-option="7d">7 days</div>\n          </div>\n          <div>\n          <div class="change-period-btn" data-option="30d">30 days</div>\n          <div class="change-period-btn" data-option="60d">60 days</div>\n          <div class="change-period-btn" data-option="200d">200 days</div>\n          </div>\n          </div>\n\n          ',t),this.switchPriceChangePeriod=e,this.currentPressed=this.node.querySelector(".change-period-btn"),this.node.querySelectorAll(".change-period-btn").forEach(e=>e.addEventListener("click",this.clickHandler.bind(this)))}renderInit(e){this.node.querySelectorAll(".change-period-btn").forEach(t=>{t.dataset.option===e&&t.dispatchEvent(new Event("click"))})}clickHandler(e){e.target.dataset&&(this.switchPriceChangePeriod(e.target.dataset.option),this.currentPressed.classList.remove("period-btn-pressed"),e.target.classList.add("period-btn-pressed"),this.currentPressed=e.target)}}class P{constructor(e){this.node=d.createNode({tag:"div",id:"main"}),this.TotalValue=new A,this.node.appendChild(this.TotalValue.node),this.PortfolioLegend=new D(this.node,e),this.PortfolioView=new I(e.openDetails),this.node.appendChild(this.PortfolioView.node),this.ChangePeriodButtons=new M(e.switchPriceChangePeriod,this.node)}}class L{constructor(e,t){this.node=d.createComponent('<div style="justify-content:flex-start">\n            <svg id="home-button" class="footer-button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 27 27"><style>.a{fill:#030104;}</style><path class="svgbody" d="M3.7 24.9c0 0 0 0.6 0.6 0.6 0.7 0 6.8 0 6.8 0l0-5.6c0 0-0.1-0.9 0.8-0.9h2.8c1.1 0 1 0.9 1 0.9l0 5.6c0 0 5.8 0 6.7 0 0.7 0 0.7-0.8 0.7-0.8V14.4l-9.4-8.4 -10 8.4C3.7 14.4 3.7 24.9 3.7 24.9z" /><path class="svgbody" d="M0 13.6c0 0 0.8 1.6 2.7 0l11-9.3 10.3 9.3c2.1 1.5 2.9 0 2.9 0L13.7 1.5 0 13.6z" /><polygon points="23.8 4.3 21.2 4.3 21.2 7.5 23.8 9.8 "  class="svgbody"/></svg>\n            </div>',e),this.node.querySelector(".footer-button").addEventListener("click",t,!1)}}class q{constructor(e,t){this.node=d.createComponent('<div style="justify-content:center"><svg class="footer-button" id="add-coin" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 292.4 292.4"><path class="svgbody" d="M146.2 0C65.6 0 0 65.6 0 146.2s65.6 146.2 146.2 146.2 146.2-65.6 146.2-146.2S226.8 0 146.2 0zM195 152.2h-42.8v42.8c0 3.3-2.7 6-6 6 -3.3 0-6-2.7-6-6v-42.8H97.4c-3.3 0-6-2.7-6-6s2.7-6 6-6h42.8V97.4c0-3.3 2.7-6 6-6 3.3 0 6 2.7 6 6v42.8h42.8c3.3 0 6 2.7 6 6S198.3 152.2 195 152.2z" fill="#010002"/></svg></div>',e),this.node.querySelector(".footer-button").addEventListener("click",t,!1)}}class T{constructor(e,t){this.node=d.createComponent('<div style="justify-content:flex-end"><svg class="footer-button" id="settings-button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><metadata>   Svg Vector Icons : http:&#x2F;&#x2F;www.onlinewebfonts.com&#x2F;icon </metadata><path class="svgbody" d="M227.3 79.7l142.8-63.6 45.6 102.3c49.7-11 100.1-12 148.6-3.9L604.4 10l145.9 56 -40.1 104.6c41.5 26.4 78.3 60.8 107.8 102.3l102.3-45.6 63.6 142.8 -102.3 45.6c11 49.7 12 100.1 3.9 148.6L990 604.4l-56 145.9 -104.6-40.1C803 751.6 768.6 788.5 727.1 818l45.6 102.3 -142.8 63.6 -45.6-102.3c-49.7 11-100.1 12-148.6 3.9L395.6 990l-145.9-56 40.2-104.6C248.4 803 211.5 768.6 182 727.1L79.7 772.7 16.1 629.9l102.3-45.6c-11-49.7-12-100.1-3.9-148.6L10 395.6l56-145.9 104.6 40.1c26.4-41.5 60.8-78.3 102.3-107.8L227.3 79.7zM404.7 285.9c-118.3 52.7-171.5 191.2-118.8 309.5 52.7 118.3 191.2 171.5 309.5 118.8 118.3-52.7 171.5-191.2 118.8-309.5C661.5 286.4 522.9 233.2 404.7 285.9z"/></svg>\n</div>',e),this.node.querySelector(".footer-button").addEventListener("click",t,!1)}}class V{constructor(e,t,n,r){this.node=d.createComponent('<div id="footer-buttons"></div>',r),this.HomeButton=new L(this.node,e),this.AddCoinButton=new q(this.node,t),this.SettingsButton=new T(this.node,n)}}n(15);class O{constructor(){this.node=d.createComponent('\n            <div class="page-container">\n        <div id="about" >\n        <p>\n          Coin Watcher is a free, open source and privacy-oriented cryptocurrency portfolio web app.  </p>\n        <p>  It stores all user data strictly on client side, while market data is fetched from public API\'s.</p>\n          <p>\n          The current API\'s are:\n          <ul>\n            <li><a href="https://www.coingecko.com">coingecko.com</a></li>\n          </ul>\n\n\n          </p>\n          <p>\n          The official page of the project is at <a href="https://github.com/Tiramisu77/CoinWatcher-Vanilla">https://github.com/Tiramisu77/CoinWatcher-Vanilla</a>\n          </p>\n\n        </div>\n        </div>\n        ')}}const B="/CoinWatcher-Vanilla";class F{constructor(e,t,n,r,i,o){this.node=d.createNode({tag:"div",id:"root",appendTo:e}),this.routes={"/AddCoin":n,"/CoinDetails":r,"/Settings":i,"/About":o,"/":t},this.currentRoute=null,window.onpopstate=(()=>{const e=window.location.pathname.replace(new RegExp(B),"");this.currentRoute&&this.currentRoute.onUnmount&&this.currentRoute.onUnmount(),this.currentRoute=this.routes[e],this.render(this.routes[e])}),window.addEventListener("load",()=>{const e=window.location.pathname;this.routes[e]?this.router(e):this.router("")})}router(e){""===e&&(e="/"),"file:"!==window.location.protocol&&window.history.pushState({},e,window.location.origin+B+e),this.currentRoute&&this.currentRoute.onUnmount&&this.currentRoute.onUnmount(),this.currentRoute=this.routes[e],this.render(this.routes[e])}render(e){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(e.node)}}class j{constructor(){window.EE.on("showNotification",this.render,this)}render(e){let{notification:t,data:n}=e;"price"===t.type?this.renderPriceNotification(t,n):this.renderPercNotification(t,n)}renderPriceNotification(e,t){try{const n=navigator.languages?navigator.languages[0]:navigator.language?navigator.language:"en-US";navigator.serviceWorker.ready.then(function(r){r.showNotification("Coin Watcher alert",{body:`${t.name} @ ${window.lib.numToFormattedString(t.price,{type:"currency",currency:e.currency,lang:n})}`,icon:e.targetIsHigher?"/CoinWatcher-Vanilla/images/green-delta.png":"/CoinWatcher-Vanilla/images/red-delta.png",requireInteraction:!0})})}catch(e){console.error(e)}}renderPercNotification(e,t){try{navigator.serviceWorker.ready.then(function(n){n.showNotification("Coin Watcher alert",{body:`${t.name} ${e.period} change: ${window.lib.numToFormattedString(t.priceChange,{type:"percentage",isChange:!0}).str} (${window.lib.numToFormattedString(t.currentPrice,{type:"currency",currency:e.currency})})`,icon:t.priceChange<0?"/CoinWatcher-Vanilla/images/red-delta.png":"/CoinWatcher-Vanilla/images/green-delta.png",requireInteraction:!0})})}catch(e){console.error(e)}}}class U{constructor(e){this.node=document.getElementById("app"),this.router=this.router.bind(this),this._Head=new u(this.node),this._Main=new P(e),this._CoinDetails=new _(e.removeItem,this.router),this._AddCoinWindow=new g(e.addItem,this.router),this._AppSettings=new w(e.changeSettings,()=>{this.router("/About")}),this._About=new O,this._Root=new F(this.node,this._Main,this._AddCoinWindow,this._CoinDetails,this._AppSettings,this._About),this._FooterButtons=new V(()=>{this.router("")},()=>{this.router("/AddCoin")},()=>{this.router("/Settings")},this.node),this.NotificationsView=new j}router(e){this._Root.router(e)}onLaunch(e,t,n){for(let t of e)this.mountItem(t);this.renderTotal(t),this.renderSettings(n),this._Main.PortfolioLegend.renderInit(n.portfolioSortedBy),this._Main.ChangePeriodButtons.renderInit(n.priceChangePeriod),this.changeColorScheme(n.colorScheme[n.colorScheme.current]),"file:"===window.location.protocol&&this.router("")}addAllCurrencyOptions(e,t){this._AppSettings.addAllCurrencyOptions(e,t)}changeColorScheme(e){const t=document.querySelector(":root");for(let n in e)t.style.setProperty(n,e[n])}openDetails(e,t){this._CoinDetails.render(e,t)}mountItem(e){this._Main.PortfolioView.addItem(e)}unmountItem(e){this._Main.PortfolioView.removeItem(e)}sortPortfolio(e){this._Main.PortfolioView.sortView(e)}renderTotal(e){this._Main.TotalValue.render(e)}renderSettings(e){this._AppSettings.render(e)}showSpinner(){this._Head.showSpinner()}hideSpinner(){this._Head.hideSpinner()}renderHeadMessage(e){this._Head.renderHeadMessage(e)}wipeHeadMessage(){this._Head.wipeHeadMessage()}clearErrorMessage(e){this._Head.clearErrorMessage(e)}}class z{constructor(e){this.model=e,this.testPermissions(),window.EE.on("itemChange",e=>{e.__amountWasChanged__&&this.savePortfolio()}),window.EE.on("saveNotifications",this.saveNotifications,this),window.EE.on("saveSettings",this.saveSettings,this)}onLaunch(){this.loadSettings(),this.loadPortfolio(),this.loadNotifications()}testPermissions(){try{localStorage.setItem("permissionsTest","test");const e=localStorage.getItem("permissionsTest");if(localStorage.removeItem("permissionsTest"),"test"!==e)throw new Error(`Unexpected localStorage behavior: ${e}, expected "test"`)}catch(e){console.error(e),alert("this webapp is based on window.localStorage API, please enable cookies and storage")}}saveNotifications(e){localStorage.setItem("notifications",JSON.stringify(e))}loadPortfolio(){try{const e=localStorage.getItem("portfolio");if(!e)return;this.model.createItemModels(JSON.parse(e))}catch(e){console.error(e)}}savePortfolio(){try{localStorage.setItem("portfolio",JSON.stringify(this.model.portfolioJSON))}catch(e){console.error(e)}}loadSettings(){try{let e=JSON.parse(localStorage.getItem("settings"));e&&(this.model.settings=e)}catch(e){console.error(e),console.warn("reverting to default settings")}}saveSettings(){try{localStorage.setItem("settings",JSON.stringify(this.model.settingsJSON))}catch(e){console.error(e)}}loadNotifications(){let e=JSON.parse(localStorage.getItem("notifications")||"{}");window.EE.emit("initNotifications",e)}saveTotalValSnapshot(e){let t=JSON.parse(localStorage.getItem("totalValSnapshots")||"[]");t.push(e),localStorage.setItem("totalValSnapshots",JSON.stringify(t))}}const R=function(e){return function(){this.model.settings.portfolioSortedBy=e,this.view.sortPortfolio(this.model.sortedPortfolioNames),this.storage.saveSettings()}},G={...{addItem:function(e,t){if(""===e||""===t)return"";let n=window.EE.request("idFromInput",e),r=Number(t);if("number"!=typeof r||isNaN(r))return"Amount must a be number";let i=this.model.addItem(n,r);if("ok"===i){let e=window.EE.request("itemStrings",n);return this.view.mountItem(e),this.network.loadPircesAndUpdateSingle(n),this.storage.savePortfolio(),"ok"}return i},removeItem:function(e){this.model.deleteItem(e),this.storage.savePortfolio(),this.view.unmountItem(e),this.view.renderTotal(this.model.total),window.EE.emit("removeAllNotifs",e)},switchPriceChangePeriod:function(e){this.model.settings.priceChangePeriod=e,this.storage.saveSettings(),this.view.renderTotal(this.model.total),window.EE.emit("updatePortfolio")},makeTotalValSnapshot:function(){let{mainCurrencyNet:e}=window.EE.request("totalValue","24h","USD","USD"),t=Date.now();"number"!=typeof e||isNaN(e)||0===e?console.warn(`incorrect total value: ${e}`):this.storage.saveTotalValSnapshot({value:e,timestamp:t})},totalValSnapshotLoop:function(){this.actions.makeTotalValSnapshot(),setTimeout(this.actions.totalValSnapshotLoop,this.model.settings.totalValSnapshotInterval)}},...{onItemChange:function(){this.view.sortPortfolio(this.model.sortedPortfolioNames),this.view.renderTotal(this.model.total)},openDetails:function(e){let t=window.EE.request("itemStrings",e);this.view.openDetails(t)}},...{sortByAlphaAsc:R("alphaAsc"),sortByAlphaDsc:R("alphaDsc"),sortByNetvalAsc:R("netvalAsc"),sortByNetvalDsc:R("netvalDsc"),sortByMcapAsc:R("mcapAsc"),sortByMcapDsc:R("mcapDsc")},changeSettings:function(e,t){if("interval"===e){const e=60*parseInt(t)*1e3;this.model.settings.updateInterval=e,clearTimeout(this.timer),this.network.loop()}"colorScheme"===e&&(this.model.settings.colorScheme=t,this.view.changeColorScheme(this.model.settings.colorScheme[this.model.settings.colorScheme.current])),"versusCurrencies"===e&&(this.model.settings.versusCurrencies=t,this.view.renderTotal(this.model.total),window.EE.emit("updatePortfolio")),"currencyMain"===e&&(this.model.settings.currentCurrencies.main=t,this.view.renderTotal(this.model.total),window.EE.emit("updatePortfolio")),"currencySecond"===e&&(this.model.settings.currentCurrencies.second=t,this.view.renderTotal(this.model.total),window.EE.emit("updatePortfolio")),this.storage.saveSettings()},getNotifPermission:function(){"Notification"in window&&"denied"===Notification.permission&&Notification.requestPermission()},testNotif:function(){new Notification("test")}},H=function(e,t){return function(...n){return t.call(this,e,n)}},$=async function(e,t){try{return await e.call(this,...t)}catch(e){window.DEBUG&&console.error(e)}};class J{constructor(){this.__eventRegister__=new Map,this.__requestRegister__=new Map}on(e,t,n=null){if("string"!=typeof e)throw new Error("event must be a string");if("function"!=typeof t)throw new Error("handler must be a function");this.__eventRegister__.has(e)?this.__eventRegister__.get(e).push({handler:t,context:n}):this.__eventRegister__.set(e,[{handler:t,context:n}])}emit(e,...t){if(!this.__eventRegister__.has(e))throw new Error(`event ${e} not found`);this.__eventRegister__.get(e).forEach(e=>{e.handler.call(e.context,...t)})}unsub(){}once(){}request(e,...t){if(this.__requestRegister__.has(e)){let{handler:n,context:r}=this.__requestRegister__.get(e);return n.call(r,...t)}throw new Error(`query ${e} not found`)}respond(e,t,n=null){if("string"!=typeof e)throw new Error("query must be a string");if("function"!=typeof t)throw new Error("handler must be a function");if("object"!=typeof n)throw new Error("context must be an object");if(this.__requestRegister__.has(e))throw new Error("only one handler can respond to requests");this.__requestRegister__.set(e,{handler:t,context:n})}}const W={EventEmitter:J,tryCatchWrapper:$,decorate:H,createId:function(){return"_"+Math.random().toString(36).substr(2,9)},wipeChildren:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},periodStrToMs:function(e){return"d"===e[e.length-1]?864e5*parseInt(e):"h"===e[e.length-1]?36e5*parseInt(e):void 0},toFixedCurrency:function(e){return e>100?e.toFixed(0):e>10?e.toFixed(2):e>1?e.toFixed(4):e<1?e.toFixed(8):void 0},numToFormattedString:r};window.lib=W;const Z=function(e){return"string"==typeof e&&e.length>0},Q=function(e){let{id:t,name:n,image:r,market_data:i}=e;if(!1===(Z(t)&&Z(n)&&(Z(r)||void 0===r)&&"object"==typeof i))throw new Error("malformed coin data");return e},X=function(e){let{id:t,symbol:n,name:r}=e;return!1===(Z(t)&&Z(n)&&Z(r))?(window.DEBUG&&console.warn(`Malformed coinList data @ ${e}`),null):e},K=function(e){const t=e,n={};return n.id=t.id,n.symbol=t.symbol.toUpperCase(),n.name=t.name,n.image=t.image.small,n.market_data=t.market_data,n},Y=function(e){return(async e=>fetch(`https://api.coingecko.com/api/v3/coins/${e}?localization=false&tickers=false&market_data=true&community_data=false&developer_data=false&sparkline=false`).then(e=>e.ok?e.json():Promise.reject(e.status)))(e).then(K).then(Q)},ee=async function(e,t){try{return this.view.showSpinner(),await e.call(this,...t)}finally{this.view.hideSpinner()}},te=H(async function(){try{const e=await Promise.all(this.model.sortedPortfolioNames.map(e=>ne.call(this,e)));if(e.length>0&&e.every(e=>"not ok"===e))throw"Failed to load prices in single mode";this.view.clearErrorMessage("Unable to load market data")}catch(e){this.view.renderHeadMessage({body:"Unable to load market data",type:"error"})}},ee),ne=async function(e){try{if(!1===this.model.SupportedCoins.isInList(e))return"ok";const t=await Y(e);return window.EE.emit("newMarketData",t),"ok"}catch(e){return window.DEBUG&&console.error(e),"not ok"}},re=H(async function(e){try{if("not ok"===await ne.call(this,e))throw`failed to load ${e}`;this.view.clearErrorMessage(`Unable to load market data for ${e}`)}catch(t){throw window.DEBUG&&console.error(t),this.view.renderHeadMessage({body:`Unable to load market data for ${e}`,type:"error"}),t}},ee),ie=H(async function(){let e=await async function(){try{let e=await fetch("https://api.coingecko.com/api/v3/coins/list").then(e=>e.ok?e.json():Promise.reject(e.status));return e=e.map(X).filter(e=>null!==e)}catch(e){return window.DEBUG&&console.error(e),"not ok"}}();this.model.SupportedCoins.initizalizeList(e)},ee),oe=async function(){(async function(){return fetch("https://api.coingecko.com/api/v3/simple/supported_vs_currencies").then(e=>e.ok?e.json():Promise.reject(e.status))})().then(e=>e.map(e=>e.toUpperCase())).then(e=>e.sort((e,t)=>e.localeCompare(t))).then(e=>{this.model.versusCurrencies=e}).then(()=>{this.view.addAllCurrencyOptions(this.model.versusCurrencies,this.model.settings)}).catch(console.error)},se={loop:async function(){clearTimeout(this.timer),console.warn("syncing");let e=this.model.settings.updateInterval;if(this.timer=setTimeout(this.network.loop,e),"number"!=typeof e||isNaN(e)||e<12e4||e>2147483647)throw new Error("bad interval");await te.call(this)},loadPircesAndUpdateSingle:re,getSupportedCoinsAndCurrencies:async function(){return oe.call(this),ie.call(this)}},ae={MIN_UPDATE_INTERVAL:12e4,MAX_SAFE_INTERVAL:2147483647},ce=function(e,t){try{return e.call(this,...t)}catch(e){return console.error(e),e}};class le{constructor(){this.actions={};for(let e in G){let t=G[e];t=(t=H(t,ce)).bind(this),this.actions[e]=t}this.network={};for(let e in se){let t=se[e];t=(t=H(t,$)).bind(this),this.network[e]=t}this.model=new l(ae),this.view=new U(this.actions),this.storage=new z(this.model),this.timer=null,this.registerListeners()}registerListeners(){window.EE.on("itemChange",this.actions.onItemChange),window.addEventListener("load",this.onLaunch.bind(this))}async onLaunch(){try{this.storage.onLaunch(),this.view.onLaunch(this.model.itemStringsList,this.model.total,this.model.settings),await this.network.getSupportedCoinsAndCurrencies(),this.network.loop(),window.addEventListener("focus",()=>{this.network.loop(),console.warn("starting sync loop")})}catch(e){console.error(e)}}}window.EE=new J;"serviceWorker"in navigator?navigator.serviceWorker.register("./service-worker.js").then(function(e){console.info("Service worker registered"),e.addEventListener("updatefound",()=>{window.location.reload()})},function(e){window.DEBUG&&console.error("Service worker registration failed:",e)}):console.error("Service workers are not supported."),window.app=new class{constructor(){try{this.controller=new le}catch(e){this.catchInitErr(e)}}exportPortfolio(){console.info(localStorage.getItem("portfolio"))}importPortfolio(e){localStorage.setItem("portfolio",e)}getErrorLog(){console.info(localStorage.getItem("criticalErrors"))}testRandomPortfolio(){let e=JSON.parse(localStorage.getItem("coinlist")),t={data:{}};for(let n of e.data)Math.random()>.993&&(t.data[n.id]={amount:100002*Math.random()});t.__portfolioVersion__=100,localStorage.setItem("portfolio",JSON.stringify(t)),location.reload()}exportStorage(){let e={portfolio:JSON.parse(localStorage.getItem("portfolio")),settings:JSON.parse(localStorage.getItem("settings"))};console.info(JSON.stringify(e))}importSotrage(e){let{portfolio:t,settings:n}=JSON.parse(e);localStorage.setItem("portfolio",JSON.stringify(t)),localStorage.setItem("settings",JSON.stringify(n))}catchInitErr(e){let t=JSON.parse(localStorage.getItem("criticalErrors")||"[]"),n={};n.stack=e.stack,n.message=e.message,t.push(n),localStorage.setItem("criticalErrors",JSON.stringify(t)),alert(`Critical  ${e}`),console.error(e)}}}]);